# =============================================================================
# TK-RAG 智能问答系统环境配置模板
# =============================================================================
#
# 使用说明：
# 1. 复制此文件为 .env
# 2. 根据实际环境修改配置值
# 3. 确保数据库服务已启动并可访问
# 4. 启动应用前检查配置是否正确
#
# 注意：请勿将包含敏感信息的 .env 文件提交到版本控制系统
# =============================================================================

# =============================================================================
# 基础环境配置
# =============================================================================

# 环境标识：dev(开发环境), prod(生产环境)
ENV=dev

# 日志记录级别
LOG_LEVEL=DEBUG

# =============================================================================
# 状态同步配置
# =============================================================================

# 是否启用状态同步
STATUS_SYNC_ENABLED=true

# 状态同步请求超时时间（秒）
STATUS_SYNC_TIMEOUT=10

# 状态同步重试次数
STATUS_SYNC_RETRY_ATTEMPTS=3

# 状态同步重试延迟（秒）
STATUS_SYNC_RETRY_DELAY=1.0

# =============================================================================
# 数据库配置
# =============================================================================

# 数据库名称
# 开发环境：tk_rag_dev
# 生产环境：tk_rag
DB_NAME=tk_rag_dev

# MySQL 配置
MYSQL_HOST=192.168.5.199
MYSQL_USER=root
MYSQL_PASSWORD=Tk@654321
MYSQL_PORT=3306

# =============================================================================
# Milvus 向量数据库配置
# =============================================================================

# Milvus 服务器地址
MILVUS_HOST=192.168.5.199
MILVUS_PORT=19530
MILVUS_URI=http://192.168.5.199:19530/

# Milvus 访问令牌
MILVUS_TOKEN=root:Milvus

# =============================================================================
# 大模型配置
# =============================================================================

# 大模型名称：qwen, pangu 等
LLM_NAME=qwen

# 通义千问 API 配置
# 请从 https://dashscope.console.aliyun.com/ 获取 API Key
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# 通义千问 API 基础URL（可选，使用默认值）
DASHSCOPE_API_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# =============================================================================
# 环境配置示例
# =============================================================================

# 开发环境配置示例：
# ENV=dev
# DB_NAME=tk_rag_dev
# MYSQL_HOST=192.168.5.199
# MILVUS_HOST=192.168.5.199

# 生产环境配置示例：
# ENV=prod
# DB_NAME=tk_rag
# MYSQL_HOST=localhost
# MILVUS_HOST=localhost

# =============================================================================
# 配置说明
# =============================================================================

# 1. 数据库配置说明：
#    - DB_NAME: 根据环境选择不同的数据库名称，避免数据冲突
#    - MYSQL_HOST: 开发环境使用远程服务器，生产环境使用 localhost
#    - MYSQL_PASSWORD: 请使用强密码，生产环境必须更改

# 2. Milvus 配置说明：
#    - MILVUS_HOST: Milvus 服务器地址
#    - MILVUS_TOKEN: Milvus 认证令牌，格式为 username:password
#    - MILVUS_URI: 完整的 Milvus 连接 URI

# 3. 大模型配置说明：
#    - LLM_NAME: 当前使用的大模型名称
#    - DASHSCOPE_API_KEY: 通义千问 API 密钥，必须配置
#    - DASHSCOPE_API_BASE_URL: API 基础 URL，通常使用默认值

# 4. 状态同步配置说明：
#    - STATUS_SYNC_ENABLED: 是否启用状态同步功能
#    - STATUS_SYNC_TIMEOUT: 同步请求超时时间
#    - STATUS_SYNC_RETRY_ATTEMPTS: 重试次数
#    - STATUS_SYNC_RETRY_DELAY: 重试延迟时间

# =============================================================================
# 注意事项
# =============================================================================

# 1. 安全注意事项：
#    - 请勿将包含真实密码的 .env 文件提交到版本控制系统
#    - 生产环境必须使用强密码
#    - API 密钥请妥善保管，不要泄露

# 2. 环境切换注意事项：
#    - 开发环境和生产环境使用不同的数据库名称
#    - 生产环境建议使用 localhost 或内网地址
#    - 确保网络连接和防火墙设置正确

# 3. 服务依赖检查：
#    - MySQL 服务必须正常运行
#    - Milvus 服务必须正常运行
#    - 确保所有服务的端口可访问

# 4. 故障排除：
#    - 如果连接失败，检查网络和防火墙设置
#    - 如果认证失败，检查用户名密码是否正确
#    - 如果 API 调用失败，检查 API 密钥是否有效

# =============================================================================
# 快速配置指南
# =============================================================================

# 步骤 1: 复制配置文件
# cp .env.example .env

# 步骤 2: 修改必需配置
# - 设置 DASHSCOPE_API_KEY
# - 根据环境修改数据库地址
# - 确认状态同步 URL

# 步骤 3: 验证配置
# - 检查数据库连接
# - 检查 Milvus 连接

# 步骤 4: 初始化环境
# 执行: ./scripts/init_all.py

# 步骤 4: 启动服务
# uvicorn fastapi_app:app --host 0.0.0.0 --port 8000 --reload