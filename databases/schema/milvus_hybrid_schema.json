{
  "collection_name": "rag_collection_v2",
  "description": "RAG混合检索集合, 支持向量检索 + 全文检索 + BM25检索",
  "fields": [
    {
      "name": "doc_id",
      "type": "VARCHAR",
      "max_length": 64,
      "is_primary": true,
      "description": "唯一文档ID(哈希值)"
    },
    {
      "name": "seg_id",
      "type": "VARCHAR",
      "max_length": 64,
      "description": "段落ID(使用哈希值)"
    },
    {
      "name": "seg_parent_id",
      "type": "VARCHAR",
      "max_length": 64,
      "description": "父段落ID"
    },
    {
      "name": "seg_dense_vector",
      "type": "FLOAT_VECTOR",
      "dim": 1024,
      "description": "文本密集向量, 使用BGE-M3生成"
    },
    {
      "name": "seg_sparse_vector",
      "type": "SPARSE_FLOAT_VECTOR",
      "description": "文本稀疏向量, 用于BM25检索"
    },
    {
      "name": "seg_content",
      "type": "VARCHAR",
      "enable_analyzer": true,
      "description": "文本内容, 支持全文检索, 不限制长度避免内容截断"
    },
    {
      "name": "seg_type",
      "type": "VARCHAR",
      "max_length": 32,
      "description": "片段类型, 如text/table/image"
    },
    {
      "name": "seg_page_idx",
      "type": "INT64",
      "description": "分块所在页码"
    },
    {
      "name": "permission_ids",
      "type": "JSON",
      "description": "权限信息, 包含部门ID, 支持未来扩展角色ID、账号ID等, 不限制长度避免权限信息截断"
    },
    {
      "name": "create_time",
      "type": "VARCHAR",
      "max_length": 64,
      "description": "嵌入创建时间"
    },
    {
      "name": "update_time",
      "type": "VARCHAR",
      "max_length": 64,
      "description": "嵌入更新时间"
    },
    {
      "name": "metadata",
      "type": "JSON",
      "description": "可选扩展字段"
    }
  ],
  "functions": [
    {
      "name": "text_bm25_emb",
      "input_field_names": [
        "seg_content"
      ],
      "output_field_names": [
        "seg_sparse_vector"
      ],
      "function_type": "BM25"
    }
  ]
}